{
  "default_mods": ["show_waits"],
  "available_mods": [
    "Other",
    {"id": "show_waits", "name": "Show Waits", "desc": "Add some UI that shows waits."},
    {"id": "open_hands", "name": "Open Hands", "desc": "Everyone plays with tiles shown."}
  ],
  "display_name": "Wright-Patterson Mah Jongg",
  "tutorial_link": "https://github.com/EpicOrange/riichi_advanced/blob/main/documentation/wrightpatterson.md",
  "wall": ["1m", "1m", "1m", "1m",
           "2m", "2m", "2m", "2m",
           "3m", "3m", "3m", "3m",
           "4m", "4m", "4m", "4m",
           "5m", "5m", "5m", "5m",
           "6m", "6m", "6m", "6m",
           "7m", "7m", "7m", "7m",
           "8m", "8m", "8m", "8m",
           "9m", "9m", "9m", "9m",
           "1p", "1p", "1p", "1p",
           "2p", "2p", "2p", "2p",
           "3p", "3p", "3p", "3p",
           "4p", "4p", "4p", "4p",
           "5p", "5p", "5p", "5p",
           "6p", "6p", "6p", "6p",
           "7p", "7p", "7p", "7p",
           "8p", "8p", "8p", "8p",
           "9p", "9p", "9p", "9p",
           "1s", "1s", "1s", "1s",
           "2s", "2s", "2s", "2s",
           "3s", "3s", "3s", "3s",
           "4s", "4s", "4s", "4s",
           "5s", "5s", "5s", "5s",
           "6s", "6s", "6s", "6s",
           "7s", "7s", "7s", "7s",
           "8s", "8s", "8s", "8s",
           "9s", "9s", "9s", "9s",
           "1z", "1z", "1z", "1z",
           "2z", "2z", "2z", "2z",
           "3z", "3z", "3z", "3z",
           "4z", "4z", "4z", "4z",
           "0z", "0z", "0z", "0z",
           "6z", "6z", "6z", "6z",
           "7z", "7z", "7z", "7z",
           "1f", "2f", "3f", "4f",
           "1g", "2g", "3g", "4g"],
  "set_definitions": {
    "pair": [[0, 0]],
    "shuntsu": [[0, 1, 2]],
    "koutsu": [[0, 0, 0]],
    "quad": [[0, 0, 0, 0]],
    "ryanmen/penchan": [[0, 1]],
    "kanchan": [[0, 2]],
    "ittsu": [[[0,1,2],[3,4,5],[6,7,8]]],
    "ton": [["1z", "1z", "1z"]],
    "nan": [["2z", "2z", "2z"]],
    "shaa": [["3z", "3z", "3z"]],
    "pei": [["4z", "4z", "4z"]],
    "haku": [["0z", "0z", "0z"]],
    "hatsu": [["6z", "6z", "6z"]],
    "chun": [["7z", "7z", "7z"]],
    "ton_pair": [["1z", "1z"]],
    "nan_pair": [["2z", "2z"]],
    "shaa_pair": [["3z", "3z"]],
    "pei_pair": [["4z", "4z"]],
    "haku_pair": [["5z", "5z"]],
    "hatsu_pair": [["6z", "6z"]],
    "chun_pair": [["7z", "7z"]],
    "junchan_1": [["1m","1m","1m"]],
    "junchan_2": [["1p","1p","1p"]],
    "junchan_3": [["1s","1s","1s"]],
    "junchan_4": [["1m","2m","3m"]],
    "junchan_5": [["1p","2p","3p"]],
    "junchan_6": [["1s","2s","3s"]],
    "junchan_7": [["7m","8m","9m"]],
    "junchan_8": [["7p","8p","9p"]],
    "junchan_9": [["7s","8s","9s"]],
    "junchan_10": [["9m","9m","9m"]],
    "junchan_11": [["9p","9p","9p"]],
    "junchan_12": [["9s","9s","9s"]],
    "junchan_pair_1": [["1m","1m"]],
    "junchan_pair_2": [["1p","1p"]],
    "junchan_pair_3": [["1s","1s"]],
    "junchan_pair_4": [["9m","9m"]],
    "junchan_pair_5": [["9p","9p"]],
    "junchan_pair_6": [["9s","9s"]],
    "orphans_all": [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","0z","6z","7z"]],
    "seven_odd_honors": [["1z","2z","3z","4z","0z","6z","7z"]],
    "ittsuu": [[0,1,2,3,4,5,6,7,8]],
    "chuurenpoutou": [[0,0,0,1,2,3,4,5,6,7,8,8,8]]
  },
  "win_definition": [
    // Pairs Hands
      "11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a", // Doublets (Seven pairs in one suit)
      "11p|22p|33p|44p|55p|66p|77p|88p|99p 11p|22p|33p|44p|55p|66p|77p|88p|99p 11p|22p|33p|44p|55p|66p|77p|88p|99p 11p|22p|33p|44p|55p|66p|77p|88p|99p 11p|22p|33p|44p|55p|66p|77p|88p|99p 11p|22p|33p|44p|55p|66p|77p|88p|99p 00", // Snowflake: Six pairs of Dots, pair of White Dragons
      "11m|22m|33m|44m|55m|66m|77m|88m|99m 11m|22m|33m|44m|55m|66m|77m|88m|99m 11m|22m|33m|44m|55m|66m|77m|88m|99m 11m|22m|33m|44m|55m|66m|77m|88m|99m 11m|22m|33m|44m|55m|66m|77m|88m|99m 11m|22m|33m|44m|55m|66m|77m|88m|99m RR", // Valentine: ibid Cracks/Red
      "11s|22s|33s|44s|55s|66s|77s|88s|99s 11s|22s|33s|44s|55s|66s|77s|88s|99s 11s|22s|33s|44s|55s|66s|77s|88s|99s 11s|22s|33s|44s|55s|66s|77s|88s|99s 11s|22s|33s|44s|55s|66s|77s|88s|99s 11s|22s|33s|44s|55s|66s|77s|88s|99s GG", // Shamrock:  ibid Bams/Green
      // Windy Pairs: ibid any suit/(seat/round wind)
      "11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a NEWS", // Razzle
      "11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a RG0 D", // Dazzle
      "1133557799a NEWS", // Odd Pairs
      "22446688a RRGG00", // Even Pairs
      "22a|33a|44a|55a|66a|77a|88a 22a|33a|44a|55a|66a|77a|88a 22a|33a|44a|55a|66a|77a|88a NEWSRG0 Z|D", // Betty
      // Eternal Triangle: Three simples pairs in three suits (all different numbers) + NEWSRG0 + N/E/W/S/R/G/0
    // Sequence Hands
      "123456789a NEWS N|E|W|S", // News Line-up
      "123456789a 2a|3a|4a|5a|6a|7a|8a RG0 D", // Dragon Line-up
      "11233455677899a", // Odd Sequence
      // Piano Keys: 123456789a + [two pairs + single] in same suit, distinct
      // Pung Chow: menzen chinitsu tsumo
      // Harmony: "XXX0a XXX1a XXX2a DDDa + seat/round wind"
      "123456789a X0a ZZZZ|DDDD", // King Kong
      // Hi-Jacks: chinitsu suuankou tsumo
    // Novelty Hands
      // Roaring 20's: "222a 222b 222c 000 + round wind"
      "333a 333b 333c 22 EEE", // 2022 - Year of the Tiger!
      "333a 555a 777a DDDa Db Dc", // Chinese New Year
      // Firecrackers: "XXX0a XXX'0b XXX''0c Da DDb DDc"
      "888a 888b 888c NNN WW", // Typhoon
      // Poppers: "XXX0a XXX'0a XXX''0a DDDa ZZ"
      "44a 77a 44b 77b 44c 77c RR", // 4th of July
      "111a 999a 000 345a WW", // First Flights
      "111a 999a ZZZ ZZZ ZZ", // Wright-Patt Wind Tunnel
      "1952a 1952b NEEWWS", // B-52 First Flight
    // Jewel Hands
      // Jade (Bamboos): ryuuiisou
      // Ruby (Characters): ryuuiisou but in characters
      // Pearl (Dots): ryuuiisou but in dots
      // Emerald (Bamboos): ryuuiisou but it's 34579s
      // Garnet (Characters): ryuuiisou but it's 34579m
      // Opal (Dots): ryuuiisou but it's 34579p
      // Gemstones: <<TODO: await clarification on this hand>>
    // Gates Hands
      "111a 999b 22446688c", // Helen Gates
      // Cindy Gates: "111a|999a 22446688a + seat/round wind pair"
      "111a|999a 22446688a DDDa", // Lucy Gates
      "111a 999a 2345678a 2a|3a|4a|5a|6a|7a|8a", // Heavenly Gates
      "111a|999a 2345678a 2a|3a|4a|5a|6a|7a|8a DDDa", // Dragon Gates
      // Windy Gates: "111a 23456789a + seat/round wind pung" OR "999a 12345678a + seat/round wind pung"
      "111a 999a 22446688a", True Gates
    // Number Hands (NO TERMINALS)
      // Eleanor: "XXX0a XXX'0b XXX''0c EEE RR"
      // Susie Q: "XXX0a XXX'0b XXX''0c SSS GG"
      // Wally: "XXX0a XXX'0b XXX''0c WWW 00"
      // Neutrality: "XXX0a XXX'0b XXX''0c NNN 55s"
      "777a 777b 777c NEWS Z", // Maggie's Orr-bit
      "XXX0a XXX0b XXX0c ZZZ ZZ", "XXX0a XXX0b XXX0c DDD DD", // Tri-Numbers
      // Double Numbers: "XXX0a XXX0b XXX'0a XXX'0b ZZ|DD"
      // Asian Hash: "XXX0a XXX'0b XXX''0c ZZZ DD" OR "XXX0a XXX'0b XXX''0c DDD ZZ"
      // Newsy Pungs: "XXX0a XXX'0b XXX''0c NEWS Z"
    // Mixed Suits
      "13579a 13579b 2468c", // Heavenly Hopscotch
      "135a 1357b 13579c ZZ|DD", // Hopscotch
      "2468a 2468b 13579c 1c|9c", // Scotch-hopper
      "246a 468b 2468c ZZ|DD ZZ|DD", // Scotch-hopping
      // Big 1-5-7-9 Hand: "1,5,777,9 and 1,555,7,9 in two suits with a pair of Own or Prevailing Wind. (pungs may be in any number, but must be different in each suit.)"
      "111 555 777 999 11|99", // Little 1-5-7-9
      // Big 2-4-6-8 Hand: "2,4,666,8 and 222,4,6,8 in two suits with a pair of Own or Prevailing Wind. (pungs may be in any number, but must be different in each suit.)"
      "222 444 666 888 22|88", // Little 2-4-6-8 Hand
      "123a 123b 123c 1a 2b 3c 44", // Little Chows
      "123a 123b 123c NEWS Z", // Chop Suey
      "456a 456b 456c 4a 5b 6c 33", // Middle Chows
      "456a 456b 456c NEWS Z", // Sukiyaki
      "789a 789b 789c 7a 8b 9c 66", // Big Chows
      "789a 789b 789c NEWS Z", // Chow Mein
      "1234567a 1234567b", "2345678a 2345678b", "3456789a 3456789b", // Gerties Garter
      // Mish Mash: suuankou
    // Hands of Honors
      "11|99 11|99 11|99 11|99 11|99 NEWS", // Honorettes
      "111|999|ZZZ|DDD 111|999|ZZZ|DDD 111|999|ZZZ|DDD 111|999|ZZZ|DDD 11|99|ZZ|DD", // Heavenly Hash
      "11|99|ZZ 11|99|ZZ 11|99|ZZ 11|99|ZZ 11|99|ZZ RG0 D", // Winds and Terms
      "11|99|DD 11|99|DD 11|99|DD 11|99|DD 11|99|DD NEWS", // Dragons and Terms
      "19a 19b 19c ZZ|DD ZZ|DD ZZ|DD ZZ|DD", // Honorable Hash
      "19a 19b 19c NN EE WW SS", // Newsy Terminals. <<NOTE: confirm whether this hand is redundant given that Honorable Hash exists.>>
      "111|999 111|999 111|999 NEWS Z", // Terminews
      "111|999 111|999 111|999 111|999 11|99", // Grand Terminals
      "11|99 11|99 11|99 NEWSRG0 Z|D", // Terms of Honors
      "RRR GGG 000 NEWS Z", // Dragon Snooze
      "ZZZ|DDD ZZZ|DDD ZZZ|DDD ZZZ|DDD ZZ|DD", // Dragongale
      "19a 19b 19c NEWSRG0 1|9|Z|D", // Angels
      "11|99|ZZ|DD 11|99|ZZ|DD 11|99|ZZ|DD 11|99|ZZ|DD 11|99|ZZ|DD 11|99|ZZ|DD 11|99|ZZ|DD", // Heavenly Twins
      "ZZ|DD ZZ|DD ZZ|DD ZZ|DD ZZ|DD ZZ|DD ZZ|DD", // Honorable Twins
      // Dragonwyck: "DDD DDD DDD + seat/round wind pung + ZZ"
      "RRR GGG 000 EEE 99p", // Emperor's Robes
      "1111s ZZZ ZZZ ZZ ZZ", // Cranes in Flight
      "111a 999a 111b 999b 11c|99c", // Ping Pong
    // Chinese Tea Hands
      "222s|444s|666s|888s 222s|444s|666s|888s 222s|444s|666s|888s GGG SS", // Lemon Grass (Bamboos)
      "222m|444m|666m|888m 222m|444m|666m|888m 222m|444m|666m|888m RRR EE", // Hibiscus (Characters)
      "222p|444p|666p|888p 222p|444p|666p|888p 222p|444p|666p|888p 000 WW", // Jasmine (Dots)
      "333s|555s|777s|999s 333s|555s|777s|999s 333s|555s|777s|999s GGG SS", // Bamboo Blossom (Bamboos)
      "333m|555m|777m|999m 333m|555m|777m|999m 333m|555m|777m|999m RRR EE", // Lotus (Characters)
      "333p|555p|777p|999p 333p|555p|777p|999p 333p|555p|777p|999p 000 WW" // Pom Pom (Dots)
  ],
  "open_win_definition": [
  ],
  "yaku": [
      // implement all the doubles in here?
        // A: East pays and receives double. 
    // implemented as dealer_multiplier
        // B: Own Flower (each).
    { "display_name": "Seat Flower", "value": 1, "when": [{"name": "seat_is", "opts": ["east"]}, {"name": "match", "opts": [["flowers"], [[[["1f"], 1]]]]}] },
    { "display_name": "Seat Flower", "value": 1, "when": [{"name": "seat_is", "opts": ["south"]}, {"name": "match", "opts": [["flowers"], [[[["2f"], 1]]]]}] },
    { "display_name": "Seat Flower", "value": 1, "when": [{"name": "seat_is", "opts": ["west"]}, {"name": "match", "opts": [["flowers"], [[[["3f"], 1]]]]}] },
    { "display_name": "Seat Flower", "value": 1, "when": [{"name": "seat_is", "opts": ["north"]}, {"name": "match", "opts": [["flowers"], [[[["4f"], 1]]]]}] },
    { "display_name": "Seat Season", "value": 1, "when": [{"name": "seat_is", "opts": ["east"]}, {"name": "match", "opts": [["flowers"], [[[["1g"], 1]]]]}] },
    { "display_name": "Seat Season", "value": 1, "when": [{"name": "seat_is", "opts": ["south"]}, {"name": "match", "opts": [["flowers"], [[[["2g"], 1]]]]}] },
    { "display_name": "Seat Season", "value": 1, "when": [{"name": "seat_is", "opts": ["west"]}, {"name": "match", "opts": [["flowers"], [[[["3g"], 1]]]]}] },
    { "display_name": "Seat Season", "value": 1, "when": [{"name": "seat_is", "opts": ["north"]}, {"name": "match", "opts": [["flowers"], [[[["4g"], 1]]]]}] },
        // B2: Prevailing Flower (each). <<NOTE: Prevalent Wind is defined by whose wall gets broken. Look at wareme rules to figure out how to implement that.>> 
    // ???
        // C: Pung or Kong of Dragons.
    { "display_name": "White Dragon", "value": 1, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["haku"], 1]]]]}] },
    { "display_name": "Green Dragon", "value": 1, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["hatsu"], 1]]]]}] },
    { "display_name": "Red Dragon", "value": 1, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["chun"], 1]]]]}] },
        // D: Pung or Kong of Own Wind.
    {
      "display_name": "Seat Wind",
      "value": 1,
      "when": [[
        [{"name": "seat_is", "opts": ["east"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["ton"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
        [{"name": "seat_is", "opts": ["south"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["nan"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
        [{"name": "seat_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["shaa"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
        [{"name": "seat_is", "opts": ["north"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["pei"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}]
      ]]
    },
        // E: Pung or Kong of Prevalent Wind. <<NOTE: Prevalent Wind is defined by whose wall gets broken. Look at wareme rules to figure out how to implement that.>>
    // {
    //   "display_name": "Prevalent Wind",
    //   "value": 1,
    //   "when": [[
    //     [{"name": "round_wind_is", "opts": ["east"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["ton"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
    //     [{"name": "round_wind_is", "opts": ["south"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["nan"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
    //     [{"name": "round_wind_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["shaa"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
    //     [{"name": "round_wind_is", "opts": ["north"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["pei"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}]
    //   ]]
    // },
        // F: Cleared to one suit and Honors (hand must contain at least one simple):
    {
      "display_name": "Half Flush",
      "value": 1,
      "when": [[
        {"name": "winning_hand_consists_of", "opts": ["1m","2m","3m","4m","5m","6m","7m","8m","9m","1z","2z","3z","4z","0z","6z","7z"]},
        {"name": "winning_hand_consists_of", "opts": ["1p","2p","3p","4p","5p","6p","7p","8p","9p","1z","2z","3z","4z","0z","6z","7z"]},
        {"name": "winning_hand_consists_of", "opts": ["1s","2s","3s","4s","5s","6s","7s","8s","9s","1z","2z","3z","4z","0z","6z","7z"]}
      ]]
    },
        // G: Three concealed Pungs
    {
      "display_name": "Three Concealed Triplets",
      "value": 1,
      "when": [[
        ["won_by_draw", {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["sanankou_tsumo"]]}],
        ["not_won_by_draw", {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["sanankou_ron"]]}]
      ]]
    },
        // H: Cleared to Honors and Terminals
    { "display_name": "All Terminals and Honors", "value": 1, "when": [{"name": "winning_hand_consists_of", "opts": ["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","0z","6z","7z"]}] },
        // I: Ready to mah jongg on Limit Hand
    // <<TODO: Implement this. Probably best to implement it as "Ready to Mah Jongg" and then lump all three of this, L, and Q together as a single yaku.>>
        // J: Four concealed Pungs
    {
      "display_name": "Four Concealed Triplets",
      "value": 2,
      "when": [[
        ["won_by_draw", {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["suuankou_tsumo"]]}],
        ["not_won_by_draw", {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["suuankou_ron"]]}]
      ]]
    },
        // K: Cleared to Honors and Terminals in one suit (cannot count with H)
      // actually this one is redundant since it should score both F and H????
        // L: Ready to mah jongg on Double Limit Hand
    // ??????
        // M: All One Suit
    {
      "display_name": "Full Flush",
      "value": 3,
      "when": [[
        {"name": "winning_hand_consists_of", "opts": ["1m","2m","3m","4m","5m","6m","7m","8m","9m"]},
        {"name": "winning_hand_consists_of", "opts": ["1p","2p","3p","4p","5p","6p","7p","8p","9p"]},
        {"name": "winning_hand_consists_of", "opts": ["1s","2s","3s","4s","5s","6s","7s","8s","9s"]}
      ]]
    },
        // N: Two Puns and a pair of Dragons
    { "display_name": "Little Three Dragons", "value": 3, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], ["little_three_dragons"]]}] },
        // O: All Honors
    { "display_name": "All Honors", "value": 3, "when": [{"name": "winning_hand_consists_of", "opts": ["1z","2z","3z","4z","0z","6z","7z"]}] },
        // P: All Terminals
    { "display_name": "All Terminals", "value": 3, "when": [{"name": "winning_hand_consists_of", "opts": ["1m","9m","1p","9p","1s","9s"]}] }
        // Q: Ready to mah jongg on Triple Limit Hand
    // ??????
        // R: Big Three Dragons
    { "display_name": "Big Three Dragons", "value": 4, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], ["big_three_dragons"]]}] }
  ],
  "yakuman": [
  // <<TODO: implement all the yaku above>>
    // all hands in Wright-Patterson are yakuman-level, so it makes sense to implement this bit here. hands should be listed by how many limits they score
    // { "display_name": "Doublets", "value": 1, "when": [] }, // "11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a", single concealed
  ],
  "yaku_precedence": {
    "Full Flush": ["Half Flush"],
    "Big Three Dragons": ["Small Three Dragons"],
    "Four Concealed Triplets": ["Three Concealed Triplets"],
    "All Honors": ["Half Flush", "All Terminals and Honors"],
    "All Terminals": ["All Terminals and Honors"]
  },
  "score_calculation": {
    "scoring_method": ["han_fu_formula", "multiplier"], // check that this is correct
    "han_fu_rounding_factor": 2,
    "score_multiplier": 500, // this is for yakuman
    "highest_scoring_yaku_only": true,
    "dealer_multiplier": 2,
    "self_draw_multiplier": 1,
    "max_score": 500, // hopefully this means that if you lose, your max score is capped at 500. but does dealer_multiplier affect this? worried that i might have to actually write the custom scoring code here
    "yaku_lists": ["yaku"],
    "yaku2_lists": ["yakuman"],
    "yaku2_overrides_yaku1": true,
    "agarirenchan": true,
    "right_display": "minipoints",
    "point_name": "Doubles",
    "point2_name": "x Limit",
    "minipoint_name": "Pts",
      // current progress
    "win_by_discard_label": "Hu",
    "win_by_draw_label": "Zimo",
    "win_by_discard_name": "Hu",
    "win_by_draw_name": "Zimo",
    "exhaustive_draw_name": "Wall Game"
  },
  "play_restrictions": [
    [["flower"], []]
  ],
  "functions": {
    "blind_pass_left": [
      ["as", ["east", "north", "west", "south"], [
        ["when", [{"name": "counter_at_least", "opts": ["to_pass", 1]}], [["set_status", "pass_1"]]],
        ["when", [{"name": "counter_at_least", "opts": ["to_pass", 2]}], [["set_status", "pass_2"]]],
        ["when", [{"name": "counter_at_least", "opts": ["to_pass", 3]}], [["set_status", "pass_3"]]],
        ["subtract_counter", "to_pass", "count_draws", "self"],
        ["when", [{"name": "status", "opts": ["pass_1"]}], [["pass_draws", "kamicha", 1]]],
        ["when", [{"name": "status", "opts": ["pass_2"]}], [["pass_draws", "kamicha", 1]]],
        ["when", [{"name": "status", "opts": ["pass_3"]}], [["pass_draws", "kamicha", 1]]],
        ["unset_status", "pass_1", "pass_2", "pass_3"]
      ]]
    ],
    "calculate_points": [
      ["set_counter", "fu", "minipoints",
        ["remove_attrs"],
        // score calls
        ["convert_calls", {"pon": 2, "ankan": 16, "daiminkan": 8, "kakan": 8, "flower": 2}],
        ["remove_calls", "tanyaohai"],
        ["convert_calls", {"pon": 2, "ankan": 16, "daiminkan": 8, "kakan": 8, "flower": 2}],
        ["remove_calls"],
        // now remove all concealed Pungs (undeclared Kong counts as a concealed Pung)
        ["remove_groups", {"group": [0, 0, 0], "value": 4, "yaochuuhai_mult": 2}],
        ["remove_groups", {"group": [0, 0, 0], "value": 4, "yaochuuhai_mult": 2}],
        ["remove_groups", {"group": [0, 0, 0], "value": 4, "yaochuuhai_mult": 2}],
        ["remove_groups", {"group": [0, 0, 0], "value": 4, "yaochuuhai_mult": 2}],
        // remove final pair, if any
        ["remove_groups", {"group": [0, 0], "yakuhai_value": 2}]
      ]
    ]
  },
  "before_turn_change": {
    "actions": [
      ["unset_status", "flower", "kan"],
      ["when", [{"name": "status_missing", "opts": ["match_start"]}], [["unset_status", "first_turn"]]]
    ]
  },
  "after_turn_change": {
    "actions": [
      ["when", ["no_tiles_remaining"], [["pause", 1000], ["ryuukyoku"]]],
      ["when", [{"name": "status_missing", "opts": ["match_start"]}, "not_no_tiles_remaining"], [["draw"]]],
      ["when", [{"name": "everyone_status", "opts": ["no_flowers"]}], [["unset_status_all", "no_flowers", "match_start"], ["change_turn", "east"]]]
    ]
  },
  "after_charleston": {
    "actions": [
      ["when", [{"name": "status", "opts": ["blind_pass_left"]}], [
        ["unset_status_all", "blind_pass_left"],
        ["as", "everyone", [["delete_tiles", {"hand": ["1x"], "draw": ["1x"]}]]],
        ["as", "everyone", [
          ["set_counter", "to_pass", 3],
          ["subtract_counter", "to_pass", "count_draws", "kamicha"]
        ]],
        ["run", "blind_pass_left"],
        ["run", "blind_pass_left"],
        ["run", "blind_pass_left"],
        ["run", "blind_pass_left"]
      ]],
      ["when", [{"name": "anyone_status", "opts": ["start_blind_pass", "charleston_left"]}], [
        ["unset_status_all", "start_blind_pass"],
        ["push_system_message", "Select any number of the upside-down tiles to blind-pass that many tiles"],
        ["set_status_all", "blind_pass_left"]
      ]]
    ]
  },
  "after_call": {
    "actions": [
      ["when", [{"name": "match", "opts": [["last_call"], [[[["haku", "hatsu", "chun"], 1]]]]}, {"name": "match", "opts": [["calls"], [[[["haku"], 1], [["hatsu"], 1], [["chun"], 1]]]]}], [["as", "callee", [["make_responsible_for", "prev_seat", "all"]]]]],
      ["when", [{"name": "match", "opts": [["last_call"], [[[["ton", "nan", "shaa", "pei"], 1]]]]}, {"name": "match", "opts": [["calls"], [[[["ton"], 1], [["nan"], 1], [["shaa"], 1], [["pei"], 1]]]]}], [["as", "callee", [["make_responsible_for", "prev_seat", "all"]]]]]
    ]
  },
  "before_win": {
    "actions": [["set_counter", "dealer_repeats", "honba"], ["run", "calculate_points"]]
  },
  "after_start": {
    "actions": [["set_status_all", "first_turn", "match_start"], // <<TODO: set prevailing wind here>>
    ["when", [{"name": "dice_equals", "opts": [5, 9]}], [["as", "east", [["set_status", "wareme"]]]]],
    ["when", [{"name": "dice_equals", "opts": [2, 6, 10]}], [["as", "south", [["set_status", "wareme"]]]]],
    ["when", [{"name": "dice_equals", "opts": [3, 7, 11]}], [["as", "west", [["set_status", "wareme"]]]]],
    ["when", [{"name": "dice_equals", "opts": [4, 8, 12]}], [["as", "north", [["set_status", "wareme"]]]]]
    ]
  },
  "buttons": {
    "start_flower": {
      "display_name": "Reveal flower",
      "show_when": [{"name": "status", "opts": ["match_start"]}, "our_turn", {"name": "match", "opts": [["hand", "draw"], [[ "nojoker", [["1f", "2f", "3f", "4f", "1g", "2g", "3g", "4g"], 1] ]]]}],
      "actions": [["big_text", "Flower"], ["flower", "1f", "2f", "3f", "4f", "1g", "2g", "3g", "4g"], ["draw", 1, "opposite_end"]],
      "unskippable": true
    },
    "start_no_flower": {
      "display_name": "No flowers",
      "show_when": [{"name": "status", "opts": ["match_start"]}, "our_turn", {"name": "not_match", "opts": [["hand", "draw"], [[ "nojoker", [["1f", "2f", "3f", "4f", "1g", "2g", "3g", "4g"], 1] ]]]}],
      "actions": [["big_text", "No flowers"], ["set_status", "no_flowers"], ["advance_turn"], ["recalculate_buttons"]],
      "unskippable": true
    },
    "charleston_left": {
      "display_name": "Select three tiles to pass left",
      "show_when": [{"name": "status", "opts": ["charleston_left"]}],
      "actions": [
        ["mark", [["hand", 3, ["self", "not_joker"]]], [["unset_status", "charleston_left"], ["merge_draw"], ["sort_hand"], ["when", [{"name": "status", "opts": ["blind_pass_left"]}], [["draw", 3, "1x"]]]]],
        ["charleston_left"],
        ["unset_status", "first_charleston"]
      ],
      "unskippable": true,
      "cancellable": false
    },
    "charleston_across": {
      "display_name": "Select three tiles to pass across",
      "show_when": [{"name": "status", "opts": ["charleston_across"]}],
      "actions": [
        ["mark", [["hand", 3, ["self", "not_joker"]]], [["unset_status", "charleston_across"], ["merge_draw"], ["sort_hand"]]],
        ["charleston_across"],
        ["set_status", "charleston_left", "start_blind_pass"]
      ],
      "unskippable": true,
      "cancellable": false
    },
    "charleston_right": {
      "display_name": "Select three tiles to pass right",
      "show_when": [{"name": "status", "opts": ["charleston_right"]}],
      "actions": [
        ["mark", [["hand", 3, ["self", "not_joker"]]], [["unset_status", "charleston_right"], ["merge_draw"], ["sort_hand"]]],
        ["charleston_right"],
        ["set_status", "charleston_across"]
      ],
      "unskippable": true,
      "cancellable": false
    },
    "mixed-chow": {
      "display_name": "Mixed Chow",
      "call": [[11, 22], [12, 21]], // <TODO: check that this is correct>>
      "call_conditions": [
        {"name": "not_match", "opts": [["called_tile"], [[[["1z","2z","3z","4z","5z","6z","7z"], 1]]]]}
      ],
      "show_when": [{"name": "status_missing", "opts": ["match_start"]}, "not_our_turn", "kamicha_discarded", "call_available"],
      "actions": [["big_text", "Mixed Chow"], ["call"], ["change_turn", "self"]]
    },
    "chii": {
      "display_name": "Chow",
      "call": [[-2, -1], [-1, 1], [1, 2]],
      "show_when": [{"name": "status_missing", "opts": ["match_start"]}, "not_our_turn", "kamicha_discarded", "call_available"],
      "actions": [["big_text", "Chow"], ["call"], ["change_turn", "self"]]
    },
    "pon": {
      "display_name": "Pung",
      "call": [[0, 0]],
      "show_when": [{"name": "status_missing", "opts": ["match_start"]}, "not_our_turn", "someone_else_just_discarded", "call_available"],
      "actions": [["big_text", "Pung"], ["call"], ["change_turn", "self"]]
    },
    "daiminkan": {
      "display_name": "Kong",
      "call": [[0, 0, 0]],
      "show_when": [{"name": "status_missing", "opts": ["match_start"]}, "not_our_turn", "someone_else_just_discarded", "call_available"],
      "actions": [
        ["big_text", "Kong"], ["call"], ["change_turn", "self"],
        ["set_status", "kan"],
        ["draw", 1, "opposite_end"]
      ]
    },
    "ankan": {
      "display_name": "Self Kong",
      "call": [[0, 0, 0]],
      "show_when": [{"name": "status_missing", "opts": ["match_start"]}, "our_turn", "not_no_tiles_remaining", "has_draw", "self_call_available", {"name": "status_missing", "opts": ["just_reached"]}],
      "actions": [
        ["big_text", "Kong"], ["self_call"],
        ["set_status", "kan"],
        ["draw", 1, "opposite_end"]
      ]
    },
    "kakan": {
      "display_name": "Kong",
      "call": [[0, 0, 0]],
      "upgrades": "pon",
      "show_when": [{"name": "status_missing", "opts": ["match_start"]}, "our_turn", "not_no_tiles_remaining", "has_draw", "can_upgrade_call", {"name": "status_missing", "opts": ["just_reached"]}],
      "actions": [
        ["big_text", "Kong"], ["upgrade_call"],
        ["set_status", "kan"],
        ["draw", 1, "opposite_end"]
      ]
    },
    "ron": {
      "display_name": "Hu",
      "show_when": [
        "not_our_turn",
        {"name": "match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]},
        "someone_else_just_discarded",
        {"name": "match", "opts": [["hand", "calls", "last_discard"], ["win"]]}
      ],
      "actions": [["big_text", "Hu"], ["pause", 1000], ["reveal_hand"], ["win_by_discard"]],
      "precedence_over": ["chii", "pon", "daiminkan", "ron"]
    },
    "chankan": {
      "display_name": "Hu",
      "show_when": [
        "not_our_turn",
        {"name": "match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]},
        [
          [
            {"name": "last_call_is", "opts": ["kakan"]},
            {"name": "match", "opts": [["hand", "calls", "last_called_tile"], ["win"]]}
          ],
          [
            {"name": "last_call_is", "opts": ["ankan"]},
            {"name": "match", "opts": [["hand", "calls", "draw"], ["kokushi_tenpai"]]},
            {"name": "match", "opts": [["hand", "calls", "last_called_tile"], ["win"]]}
          ]
        ]
      ],
      "actions": [["big_text", "Hu"], ["pause", 1000], ["reveal_hand"], ["win_by_call"]],
      "precedence_over": ["mixed-chow", "chii", "pon", "daiminkan", "chankan"]
    },
    "tsumo": {
      "display_name": "Zimo",
      "show_when": [
        "our_turn",
        {"name": "status_missing", "opts": ["match_start"]},
        {"name": "match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]},
        {"name": "match", "opts": [["hand", "calls", "draw"], ["win"]]}
      ],
      "actions": [["big_text", "Zimo"], ["pause", 1000], ["reveal_hand"], ["win_by_draw"]]
    },
    "flower": {
      "display_name": "Flower",
      "show_when": ["our_turn", "has_draw", {"name": "status_missing", "opts": ["match_start"]}, "not_just_discarded", {"name": "match", "opts": [["hand", "draw"], [[[["1f", "2f", "3f", "4f", "1g", "2g", "3g", "4g"], 1]]]]}],
      "actions": [
        ["big_text", "Flower"],
        ["flower", "1f", "2f", "3f", "4f", "1g", "2g", "3g", "4g"],
        ["set_status", "flower"],
        ["ite", ["no_tiles_remaining"], [["advance_turn"]], [["draw", 1, "opposite_end"]]]
      ],
      "unskippable": true
    }
  },
  "auto_buttons": {
    "1_auto_sort": {
      "display_name": "A",
      "desc": "Automatically sort your hand.",
      "actions": [["sort_hand"]],
      "enabled_at_start": true
    },
    "2_auto_ron": {
      "display_name": "R",
      "desc": "Automatically declare wins.",
      "actions": [
        ["when", [{"name": "buttons_include", "opts": ["ron"]}], [["press_button", "ron"]]],
        ["when", [{"name": "buttons_include", "opts": ["tsumo"]}], [["press_button", "tsumo"]]]
      ],
      "enabled_at_start": false
    },
    "3_auto_flower": {
      "display_name": "F",
      "desc": "Automatically declare all flowers.",
      "actions": [
        ["when", [{"name": "buttons_include", "opts": ["start_flower"]}], [["press_button", "start_flower"], ["press_first_call_button", "start_flower"]]],
        ["when", [{"name": "buttons_include", "opts": ["start_no_flower"]}], [["press_button", "start_no_flower"]]],
        ["when", [{"name": "buttons_include", "opts": ["flower"]}], [["press_button", "flower"], ["press_first_call_button", "flower"]]]
      ],
      "enabled_at_start": true
    },
    "4_auto_no_call": {
      "display_name": "C",
      "desc": "Skip all calls except wins.",
      "actions": [
        ["when", [
            "not_our_turn",
            {"name": "buttons_include", "opts": ["skip"]},
            {"name": "buttons_exclude", "opts": ["ron", "chankan"]}
          ], [["press_button", "skip"]]]
      ],
      "enabled_at_start": false
    },
    "5_auto_discard": {
      "display_name": "D",
      "desc": "Automatically discard your drawn tile.",
      "actions": [["when", ["our_turn", {"name": "buttons_exclude", "opts": ["tsumo", "ankan"]}, "has_draw"], [["discard_draw"]]]],
      "enabled_at_start": false
    }
  },
  "interruptible_actions": ["play_tile", "draw", "call", "self_call", "upgrade_call"],
  "initial_score": 10000,
  "starting_tiles": 13,
  "max_rounds": 16
}
