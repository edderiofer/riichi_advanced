{
  "default_mods": ["show_waits"],
  "available_mods": [
    "Other",
    {"id": "show_waits", "name": "Show Waits", "desc": "Add some UI that shows waits."},
    {"id": "open_hands", "name": "Open Hands", "desc": "Everyone plays with tiles shown."}
  ],
  "display_name": "Wright-Patterson Mah Jongg",
  "tutorial_link": "https://github.com/EpicOrange/riichi_advanced/blob/main/documentation/wrightpatterson.md",
  "wall": ["1m", "1m", "1m", "1m",
           "2m", "2m", "2m", "2m",
           "3m", "3m", "3m", "3m",
           "4m", "4m", "4m", "4m",
           "5m", "5m", "5m", "5m",
           "6m", "6m", "6m", "6m",
           "7m", "7m", "7m", "7m",
           "8m", "8m", "8m", "8m",
           "9m", "9m", "9m", "9m",
           "1p", "1p", "1p", "1p",
           "2p", "2p", "2p", "2p",
           "3p", "3p", "3p", "3p",
           "4p", "4p", "4p", "4p",
           "5p", "5p", "5p", "5p",
           "6p", "6p", "6p", "6p",
           "7p", "7p", "7p", "7p",
           "8p", "8p", "8p", "8p",
           "9p", "9p", "9p", "9p",
           "1s", "1s", "1s", "1s",
           "2s", "2s", "2s", "2s",
           "3s", "3s", "3s", "3s",
           "4s", "4s", "4s", "4s",
           "5s", "5s", "5s", "5s",
           "6s", "6s", "6s", "6s",
           "7s", "7s", "7s", "7s",
           "8s", "8s", "8s", "8s",
           "9s", "9s", "9s", "9s",
           "1z", "1z", "1z", "1z",
           "2z", "2z", "2z", "2z",
           "3z", "3z", "3z", "3z",
           "4z", "4z", "4z", "4z",
           "0z", "0z", "0z", "0z",
           "6z", "6z", "6z", "6z",
           "7z", "7z", "7z", "7z",
           "1f", "2f", "3f", "4f",
           "1g", "2g", "3g", "4g"],
  "set_definitions": {
    "pair": [[0, 0]],
    "shuntsu": [[0, 1, 2]],
    "koutsu": [[0, 0, 0]],
    "quad": [[0, 0, 0, 0]],
    "ryanmen/penchan": [[0, 1]],
    "kanchan": [[0, 2]],
    "ittsu": [[[0,1,2],[3,4,5],[6,7,8]]],
    "ton": [["1z", "1z", "1z"]],
    "nan": [["2z", "2z", "2z"]],
    "shaa": [["3z", "3z", "3z"]],
    "pei": [["4z", "4z", "4z"]],
    "haku": [["0z", "0z", "0z"]],
    "hatsu": [["6z", "6z", "6z"]],
    "chun": [["7z", "7z", "7z"]],
    "ton_pair": [["1z", "1z"]],
    "nan_pair": [["2z", "2z"]],
    "shaa_pair": [["3z", "3z"]],
    "pei_pair": [["4z", "4z"]],
    "haku_pair": [["5z", "5z"]],
    "hatsu_pair": [["6z", "6z"]],
    "chun_pair": [["7z", "7z"]],
    "junchan_1": [["1m","1m","1m"]],
    "junchan_2": [["1p","1p","1p"]],
    "junchan_3": [["1s","1s","1s"]],
    "junchan_4": [["1m","2m","3m"]],
    "junchan_5": [["1p","2p","3p"]],
    "junchan_6": [["1s","2s","3s"]],
    "junchan_7": [["7m","8m","9m"]],
    "junchan_8": [["7p","8p","9p"]],
    "junchan_9": [["7s","8s","9s"]],
    "junchan_10": [["9m","9m","9m"]],
    "junchan_11": [["9p","9p","9p"]],
    "junchan_12": [["9s","9s","9s"]],
    "junchan_pair_1": [["1m","1m"]],
    "junchan_pair_2": [["1p","1p"]],
    "junchan_pair_3": [["1s","1s"]],
    "junchan_pair_4": [["9m","9m"]],
    "junchan_pair_5": [["9p","9p"]],
    "junchan_pair_6": [["9s","9s"]],
    "orphans_all": [["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","0z","6z","7z"]],
    "seven_odd_honors": [["1z","2z","3z","4z","0z","6z","7z"]],
    "ittsuu": [[0,1,2,3,4,5,6,7,8]],
    "chuurenpoutou": [[0,0,0,1,2,3,4,5,6,7,8,8,8]]
  },
  "win_definition": [
    // Pairs Hands
      "11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a", // Doublets (Seven pairs in one suit)
      "11p|22p|33p|44p|55p|66p|77p|88p|99p 11p|22p|33p|44p|55p|66p|77p|88p|99p 11p|22p|33p|44p|55p|66p|77p|88p|99p 11p|22p|33p|44p|55p|66p|77p|88p|99p 11p|22p|33p|44p|55p|66p|77p|88p|99p 11p|22p|33p|44p|55p|66p|77p|88p|99p 00", // Snowflake: Six pairs of Dots, pair of White Dragons
      "11m|22m|33m|44m|55m|66m|77m|88m|99m 11m|22m|33m|44m|55m|66m|77m|88m|99m 11m|22m|33m|44m|55m|66m|77m|88m|99m 11m|22m|33m|44m|55m|66m|77m|88m|99m 11m|22m|33m|44m|55m|66m|77m|88m|99m 11m|22m|33m|44m|55m|66m|77m|88m|99m RR", // Valentine: ibid Cracks/Red
      "11s|22s|33s|44s|55s|66s|77s|88s|99s 11s|22s|33s|44s|55s|66s|77s|88s|99s 11s|22s|33s|44s|55s|66s|77s|88s|99s 11s|22s|33s|44s|55s|66s|77s|88s|99s 11s|22s|33s|44s|55s|66s|77s|88s|99s 11s|22s|33s|44s|55s|66s|77s|88s|99s GG", // Shamrock:  ibid Bams/Green
      // Windy Pairs: ibid any suit/(seat/round wind)
      "11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a NEWS", // Razzle
      "11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a 11a|22a|33a|44a|55a|66a|77a|88a|99a RG0 D", // Dazzle
      "1133557799a NEWS", // Odd Pairs
      "22446688a RRGG00", // Even Pairs
      "22a|33a|44a|55a|66a|77a|88a 22a|33a|44a|55a|66a|77a|88a 22a|33a|44a|55a|66a|77a|88a NEWSRG0 Z|D", // Betty
      // Eternal Triangle: Three simples pairs in three suits (all different numbers) + NEWSRG0 + N/E/W/S/R/G/0
    // Sequence Hands
      "123456789a NEWS N|E|W|S", // News Line-up
      "123456789a 2a|3a|4a|5a|6a|7a|8a RG0 D", // Dragon Line-up
      "11233455677899a", // Odd Sequence
      // Piano Keys: 123456789a + [two pairs + single] in same suit, distinct
      // Pung Chow: menzen chinitsu tsumo
      // Harmony: "XXX0a XXX1a XXX2a DDDa + seat/round wind"
      "123456789a X0a ZZZZ|DDDD", // King Kong
      // Hi-Jacks: chinitsu suuankou tsumo
    // Novelty Hands
      // Roaring 20's: "222a 222b 222c 000 + round wind"
      "333a 333b 333c 22 EEE", // 2022 - Year of the Tiger!
      "333a 555a 777a DDDa Db Dc", // Chinese New Year
      // Firecrackers: "XXX0a XXX'0b XXX''0c Da DDb DDc"
      "888a 888b 888c NNN WW", // Typhoon
      // Poppers: "XXX0a XXX'0a XXX''0a DDDa ZZ"
      "44a 77a 44b 77b 44c 77c RR", // 4th of July
      "111a 999a 000 345a WW", // First Flights
      "111a 999a ZZZ ZZZ ZZ", // Wright-Patt Wind Tunnel
      "1952a 1952b NEEWWS", // B-52 First Flight
    // Jewel Hands
      // Jade (Bamboos): ryuuiisou
      // Ruby (Characters): ryuuiisou but in characters
      // Pearl (Dots): ryuuiisou but in dots
      // Emerald (Bamboos): ryuuiisou but it's 34579s
      // Garnet (Characters): ryuuiisou but it's 34579m
      // Opal (Dots): ryuuiisou but it's 34579p
      // Gemstones: <<TODO: await clarification on this hand>>
    // Gates Hands
      "111a 999b 22446688c", // Helen Gates
      // Cindy Gates: "111a|999a 22446688a + seat/round wind pair"
      "111a|999a 22446688a DDDa", // Lucy Gates
      "111a 999a 2345678a 2a|3a|4a|5a|6a|7a|8a", // Heavenly Gates
      "111a|999a 2345678a 2a|3a|4a|5a|6a|7a|8a DDDa", // Dragon Gates
      // Windy Gates: "111a 23456789a + seat/round wind pung" OR "999a 12345678a + seat/round wind pung"
      "111a 999a 22446688a", True Gates
    // Number Hands (NO TERMINALS)
      // Eleanor: "XXX0a XXX'0b XXX''0c EEE RR"
      // Susie Q: "XXX0a XXX'0b XXX''0c SSS GG"
      // Wally: "XXX0a XXX'0b XXX''0c WWW 00"
      // Neutrality: "XXX0a XXX'0b XXX''0c NNN 55s"
      "777a 777b 777c NEWS Z", // Maggie's Orr-bit
      "XXX0a XXX0b XXX0c ZZZ ZZ", "XXX0a XXX0b XXX0c DDD DD", // Tri-Numbers
      // Double Numbers: "XXX0a XXX0b XXX'0a XXX'0b ZZ|DD"
      // Asian Hash: "XXX0a XXX'0b XXX''0c ZZZ DD" OR "XXX0a XXX'0b XXX''0c DDD ZZ"
      // Newsy Pungs: "XXX0a XXX'0b XXX''0c NEWS Z"
    // Mixed Suits
      "13579a 13579b 2468c", // Heavenly Hopscotch
      "135a 1357b 13579c ZZ|DD", // Hopscotch
      "2468a 2468b 13579c 1c|9c", // Scotch-hopper
      "246a 468b 2468c ZZ|DD ZZ|DD", // Scotch-hopping
      // Big 1-5-7-9 Hand: "1,5,777,9 and 1,555,7,9 in two suits with a pair of Own or Prevailing Wind. (pungs may be in any number, but must be different in each suit.)"
      "111 555 777 999 11|99", // Little 1-5-7-9
      // Big 2-4-6-8 Hand: "2,4,666,8 and 222,4,6,8 in two suits with a pair of Own or Prevailing Wind. (pungs may be in any number, but must be different in each suit.)"
      "222 444 666 888 22|88", // Little 2-4-6-8 Hand
      "123a 123b 123c 1a 2b 3c 44", // Little Chows
      "123a 123b 123c NEWS Z", // Chop Suey
      "456a 456b 456c 4a 5b 6c 33", // Middle Chows
      "456a 456b 456c NEWS Z", // Sukiyaki
      "789a 789b 789c 7a 8b 9c 66", // Big Chows
      "789a 789b 789c NEWS Z", // Chow Mein
      "1234567a 1234567b", "2345678a 2345678b", "3456789a 3456789b", // Gerties Garter
      // Mish Mash: suuankou
    // Hands of Honors
      "11|99 11|99 11|99 11|99 11|99 NEWS", // Honorettes
      "111|999|ZZZ|DDD 111|999|ZZZ|DDD 111|999|ZZZ|DDD 111|999|ZZZ|DDD 11|99|ZZ|DD", // Heavenly Hash
      "11|99|ZZ 11|99|ZZ 11|99|ZZ 11|99|ZZ 11|99|ZZ RG0 D", // Winds and Terms
      "11|99|DD 11|99|DD 11|99|DD 11|99|DD 11|99|DD NEWS", // Dragons and Terms
      "19a 19b 19c ZZ|DD ZZ|DD ZZ|DD ZZ|DD", // Honorable Hash
      "19a 19b 19c NN EE WW SS", // Newsy Terminals. <<NOTE: confirm whether this hand is redundant given that Honorable Hash exists.>>
      "111|999 111|999 111|999 NEWS Z", // Terminews
      "111|999 111|999 111|999 111|999 11|99", // Grand Terminals
      "11|99 11|99 11|99 NEWSRG0 Z|D", // Terms of Honors
      "RRR GGG 000 NEWS Z", // Dragon Snooze
      "ZZZ|DDD ZZZ|DDD ZZZ|DDD ZZZ|DDD ZZ|DD", // Dragongale
      "19a 19b 19c NEWSRG0 1|9|Z|D", // Angels
      "11|99|ZZ|DD 11|99|ZZ|DD 11|99|ZZ|DD 11|99|ZZ|DD 11|99|ZZ|DD 11|99|ZZ|DD 11|99|ZZ|DD", // Heavenly Twins
      "ZZ|DD ZZ|DD ZZ|DD ZZ|DD ZZ|DD ZZ|DD ZZ|DD", // Honorable Twins
      // Dragonwyck: "DDD DDD DDD + seat/round wind pung + ZZ"
      "RRR GGG 000 EEE 99p", // Emperor's Robes
      "1111s ZZZ ZZZ ZZ ZZ", // Cranes in Flight
      "111a 999a 111b 999b 11c|99c", // Ping Pong
    // Chinese Tea Hands
      "222s|444s|666s|888s 222s|444s|666s|888s 222s|444s|666s|888s GGG SS", // Lemon Grass (Bamboos)
      "222m|444m|666m|888m 222m|444m|666m|888m 222m|444m|666m|888m RRR EE", // Hibiscus (Characters)
      "222p|444p|666p|888p 222p|444p|666p|888p 222p|444p|666p|888p 000 WW", // Jasmine (Dots)
      "333s|555s|777s|999s 333s|555s|777s|999s 333s|555s|777s|999s GGG SS", // Bamboo Blossom (Bamboos)
      "333m|555m|777m|999m 333m|555m|777m|999m 333m|555m|777m|999m RRR EE", // Lotus (Characters)
      "333p|555p|777p|999p 333p|555p|777p|999p 333p|555p|777p|999p 000 WW" // Pom Pom (Dots)
  ],
  "open_win_definition": [
      
      

  
  // REVIEW CODE FROM HERE ONWARDS
    // 2024
    "222a 000 2222b 4444b",
    "FFFF 2222a 0000 24b",
    "FF 2024a 2222b 2222c", "FF 2024a 4444b 4444c",
    // 2468
    "222a 444a 6666a 8888a", "222a 444a 6666b 8888b",
    "22a 444a 44b 666b 8888c",
    "22a 44a 666a 888a DDDDa",
    "FFFF 4444a 6666b 24c", "FFFF 6666a 8888b 48c",
    "FF 2222a 44a 66a 8888a", "FF 2222a 44b 66b 8888a",
    // Any Like Numbers
    "FFFF XXX0a XXXX0b XXX0c",
    "XX0a DDDa XX0b DDDb XXXX0c",
    "FF XXXX0a NEWS XXXX0b",
    // Lucky Sevens
    "FF 1111a 6666a 7777a",
    "FF 2222a 5555a 7777a",
    "FF 3333a 4444a 7777a",
    // Winds and Dragons
    "NNNN EEE WWW SSSS", "NNN EEEE WWWW SSS",
    "FFFF DDDa DDDDb DDDc",
    "NNN SSS XXXX0a XXXX1b", "EEE WWW XXXX0a XXXX1b",
    "FF NN EEE WWW SSSS",
    "NNNN XX0a XX1a XX2a SSSS", "EEEE XX0a XX1a XX2a WWWW",
    "FF DDDDa NEWS DDDDb",
    // 369
    "333a 666a 6666b 9999b", "333a 666a 6666b 9999c",
    "FF 3a 66a 999a 333b 333c", "FF 3a 66a 999a 666b 666c", "FF 3a 66a 999a 999b 999c",
    "FF 3333a 6666a 9999a", "FF 3333a 6666b 9999c",
    "333a DDDDa 333b DDDDb", "666a DDDDa 666b DDDDb", "999a DDDDa 999b DDDDb",
    "3333a 66a 66b 66c 9999a",
    "FFFF 33a 66a 999a DDDb",
    // Quints
    "FF XXXXX0a XX1a XXXXX2a",
    "XXXXX0a ZZZZ XXXXX1b|XXXXX2b|XXXXX3b|XXXXX4b|XXXXX5b|XXXXX6b|XXXXX7b|XXXXX8b",
    "XX0a XXXXX1a XX0b XXXXX1b",
    "FFFFF DDDDa XXXXX0b",
    // Consecutive Run
    "111a 22a 3333a 44a 555a", "555a 66a 7777a 88a 999a",
    "XX0a XXX1a DDDDb XXX2a XX3a",
    "FF XXXX0a XXXX1a XXXX2a", "FF XXXX0a XXXX1b XXXX2c",
    "X0a XX1a XXXX2a X0b XX1b XXXX2b",
    "XX0a XX1a XXX2a XXX3a DDDDa",
    "FFFFF X0a X1a X2a XXX3b XXX3c",
    "XXX0a XXX1a XXXX2a XXXX3a", "XXX0a XXX1a XXXX2b XXXX3b",
    // 13579
    "111a 33a 5555a 77a 999a", "111a 33a 5555b 77c 999c",
    "111a 333a 3333b 5555b", "555a 777a 7777b 9999b",
    "FF 11a 333a 5555a DDDa", "FF 55a 777a 9999a DDDa",
    "11a 33a 55a 7777b 9999c",
    "FFFF 3333a 5555b 15c", "FFFF 5555a 7777b 35c",
    "11a 33a 333b 555b DDDDc", "55a 77a 777b 999b DDDDc"
  ],
  "yaku": [
    { "display_name": "Pure Straight", "value": 1, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [["exhaustive", [["ittsu"], 1], [["shuntsu", "koutsu"], 1], [["pair"], 1] ]]]}] },
    { "display_name": "All Triplets", "value": 1, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["koutsu"], 4], [["pair"], 1]]]]}] },
    {
      "display_name": "Three Concealed Triplets",
      "value": 1,
      "when": [[
        ["won_by_draw", {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["sanankou_tsumo"]]}],
        ["not_won_by_draw", {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["sanankou_ron"]]}]
      ]]
    },
    { "display_name": "White Dragon", "value": 1, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["haku"], 1]]]]}] },
    { "display_name": "Green Dragon", "value": 1, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["hatsu"], 1]]]]}] },
    { "display_name": "Red Dragon", "value": 1, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], [[[["chun"], 1]]]]}] },
    { "display_name": "Little Three Dragons", "value": 3, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], ["little_three_dragons"]]}] },
    {
      "display_name": "Prevalent Wind",
      "value": 1,
      "when": [[
        [{"name": "round_wind_is", "opts": ["east"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["ton"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
        [{"name": "round_wind_is", "opts": ["south"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["nan"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
        [{"name": "round_wind_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["shaa"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
        [{"name": "round_wind_is", "opts": ["north"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["pei"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}]
      ]]
    },
    {
      "display_name": "Seat Wind",
      "value": 1,
      "when": [[
        [{"name": "seat_is", "opts": ["east"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["ton"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
        [{"name": "seat_is", "opts": ["south"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["nan"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
        [{"name": "seat_is", "opts": ["west"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["shaa"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}],
        [{"name": "seat_is", "opts": ["north"]}, {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[ [["pei"], 1], [["shuntsu", "koutsu"], 3], [["pair"], 1] ]]]}]
      ]]
    },
    { "display_name": "All Simples", "value": 1, "when": [{"name": "winning_hand_consists_of", "opts": ["2m","3m","4m","5m","6m","7m","8m","2p","3p","4p","5p","6p","7p","8p","2s","3s","4s","5s","6s","7s","8s"]}] },
    {
      "display_name": "Outside Hand",
      "value": 1,
      "when": [
        {"name": "match", "opts": [["hand", "calls", "winning_tile"], [[
          "exhaustive",
          [["junchan_1", "junchan_2", "junchan_3", "junchan_4", "junchan_5", "junchan_6", "junchan_7", "junchan_8", "junchan_9", "junchan_10", "junchan_11", "junchan_12", "ton", "nan", "shaa", "pei", "haku", "hatsu", "chun"], 4],
          [["junchan_pair_1", "junchan_pair_2", "junchan_pair_3", "junchan_pair_4", "junchan_pair_5", "junchan_pair_6", "ton_pair", "nan_pair", "shaa_pair", "pei_pair", "haku_pair", "hatsu_pair", "chun_pair"], 1]
        ]]]}
      ]
    },
    { "display_name": "All Terminals and Honors", "value": 1, "when": [{"name": "winning_hand_consists_of", "opts": ["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","0z","6z","7z"]}] },
    {
      "display_name": "Half Flush",
      "value": 1,
      "when": [[
        {"name": "winning_hand_consists_of", "opts": ["1m","2m","3m","4m","5m","6m","7m","8m","9m","1z","2z","3z","4z","0z","6z","7z"]},
        {"name": "winning_hand_consists_of", "opts": ["1p","2p","3p","4p","5p","6p","7p","8p","9p","1z","2z","3z","4z","0z","6z","7z"]},
        {"name": "winning_hand_consists_of", "opts": ["1s","2s","3s","4s","5s","6s","7s","8s","9s","1z","2z","3z","4z","0z","6z","7z"]}
      ]]
    },
    { "display_name": "Out on a Replacement", "value": 1, "when": [{"name": "not_status_missing", "opts": ["kan", "flower"]}] },
    { "display_name": "Robbing the Kong", "value": 1, "when": ["won_by_call"] },
    { "display_name": "Last Tile Draw", "value": 1, "when": ["won_by_draw", "no_tiles_remaining"] },
    { "display_name": "Last Tile Discard", "value": 1, "when": ["not_won_by_draw", "no_tiles_remaining"] },
    { "display_name": "Concealed Hand", "value": 1, "when": ["won_by_draw", {"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}] },
    { "display_name": "Seat Flower", "value": 1, "when": [{"name": "seat_is", "opts": ["east"]}, {"name": "match", "opts": [["flowers"], [[[["1f"], 1]]]]}] },
    { "display_name": "Seat Flower", "value": 1, "when": [{"name": "seat_is", "opts": ["south"]}, {"name": "match", "opts": [["flowers"], [[[["2f"], 1]]]]}] },
    { "display_name": "Seat Flower", "value": 1, "when": [{"name": "seat_is", "opts": ["west"]}, {"name": "match", "opts": [["flowers"], [[[["3f"], 1]]]]}] },
    { "display_name": "Seat Flower", "value": 1, "when": [{"name": "seat_is", "opts": ["north"]}, {"name": "match", "opts": [["flowers"], [[[["4f"], 1]]]]}] },
    { "display_name": "Seat Season", "value": 1, "when": [{"name": "seat_is", "opts": ["east"]}, {"name": "match", "opts": [["flowers"], [[[["1g"], 1]]]]}] },
    { "display_name": "Seat Season", "value": 1, "when": [{"name": "seat_is", "opts": ["south"]}, {"name": "match", "opts": [["flowers"], [[[["2g"], 1]]]]}] },
    { "display_name": "Seat Season", "value": 1, "when": [{"name": "seat_is", "opts": ["west"]}, {"name": "match", "opts": [["flowers"], [[[["3g"], 1]]]]}] },
    { "display_name": "Seat Season", "value": 1, "when": [{"name": "seat_is", "opts": ["north"]}, {"name": "match", "opts": [["flowers"], [[[["4g"], 1]]]]}] },
    {
      "display_name": "Full Flush",
      "value": 4,
      "when": [[
        {"name": "winning_hand_consists_of", "opts": ["1m","2m","3m","4m","5m","6m","7m","8m","9m"]},
        {"name": "winning_hand_consists_of", "opts": ["1p","2p","3p","4p","5p","6p","7p","8p","9p"]},
        {"name": "winning_hand_consists_of", "opts": ["1s","2s","3s","4s","5s","6s","7s","8s","9s"]}
      ]]
    },
    { "display_name": "All Flowers", "value": 4, "when": [{"name": "match", "opts": [["flowers"], ["all_flowers"]]}] },
    { "display_name": "All Seasons", "value": 4, "when": [{"name": "match", "opts": [["flowers"], ["all_seasons"]]}] }
  ],
  "yakuman": [
    // limit hands
    { "display_name": "Blessing of Heaven", "value": 1, "when": [{"name": "status", "opts": ["first_turn"]}, "won_by_draw", {"name": "seat_is", "opts": ["east"]}] },
    { "display_name": "Blessing of Earth", "value": 1, "when": [{"name": "status", "opts": ["first_turn"]}, "won_by_draw", {"name": "not_seat_is", "opts": ["east"]}] },
    {
      "display_name": "Four Concealed Pungs",
      "value": 1,
      "when": [[
        ["won_by_draw", {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["suuankou_tsumo"]]}],
        ["not_won_by_draw", {"name": "match", "opts": [["hand", "calls", "winning_tile"], ["suuankou_ron"]]}]
      ]]
    },
    { "display_name": "Four Kongs", "value": 1, "when": [{"name": "match", "opts": [["calls"], [[[["daiminkan", "ankan", "kakan"], 4]]]]}] },
    { "display_name": "All Terminals", "value": 1, "when": [{"name": "winning_hand_consists_of", "opts": ["1m","9m","1p","9p","1s","9s"]}] },
    { "display_name": "All Honors", "value": 1, "when": [{"name": "winning_hand_consists_of", "opts": ["1z","2z","3z","4z","0z","6z","7z"]}] },
    { "display_name": "Thirteen Orphans", "value": 1, "when": [{"name": "match", "opts": [["hand", "winning_tile"], [[[["orphans_all"], 1]]]]}] },
    { "display_name": "Nine Gates", "value": 1, "when": [{"name": "match", "opts": [["hand", "winning_tile"], [[[["chuurenpoutou"], 1]]]]}] },
    { "display_name": "Big Three Dragons", "value": 1, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], ["big_three_dragons"]]}] },
    { "display_name": "Little Four Winds", "value": 1, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], ["little_four_winds"]]}] },
    { "display_name": "Big Four Winds", "value": 1, "when": [{"name": "match", "opts": [["hand", "calls", "winning_tile"], ["big_four_winds"]]}] },
    { "display_name": "Plucking the Moon from the Bottom of the Sea", "value": 1, "when": ["no_tiles_remaining", "won_by_draw", {"name": "match", "opts": [["winning_tile"], [[[["1p"], 1]]]]}] },
    { "display_name": "Gathering the Plum Blossom from the Roof", "value": 1, "when": [{"name": "status", "opts": ["kan"]}, {"name": "match", "opts": [["winning_tile"], [[[["5p"], 1]]]]}] },
    { "display_name": "Scratching a Carrying-Pole", "value": 1, "when": ["won_by_call", {"name": "match", "opts": [["winning_tile"], [[[["2s"], 1]]]]}] },
    { "display_name": "Two-Fold Fortune", "value": 1, "when": [{"name": "status", "opts": ["double_kan"]}] },
    { "display_name": "Dealer's 13 Consecutive Win", "value": 1, "when": [{"name": "seat_is", "opts": ["east"]}, {"name": "counter_at_least", "opts": ["dealer_repeats", 12]}] }
  ],
  "yaku_precedence": {
    "All Flowers": ["Seat Flower"],
    "All Seasons": ["Seat Season"],
    "Seven Flowers": ["All Flowers", "All Seasons"],
    "Eight Flowers": ["Seven Flowers"],
    "After Multiple Kongs": ["After a Kong"],
    "Full Flush": ["Half Flush"],
    "Big Four Winds": ["Small Four Winds"],
    "Big Three Dragons": ["Small Three Dragons"],
    "Blessing of Earth": ["Blessing of Man"],
    "Four Concealed Triplets": ["All Triplets"],
    "All Honours": ["Round Wind", "Seat Wind", "All Triplets", "Half Flush", "Mixed Terminals"]
  },
  "score_calculation": {
    "scoring_method": ["han_fu_formula", "multiplier"],
    "score_multiplier": 500, // this is for yakuman
    "han_fu_starting_han": 0,
    "han_fu_multiplier": 1,
    "han_fu_rounding_factor": 1,
    "dealer_multiplier": 2,
    "self_draw_multiplier": 1,
    "dealer_self_draw_multiplier": 2,
    "max_score": 500,
    "yaku_lists": ["yaku"],
    "yaku2_lists": ["yakuman"],
    "yaku2_overrides_yaku1": true,
    "agarirenchan": true,
    "right_display": "minipoints",
    "point_name": "Doubles",
    "point2_name": "Limit",
    "minipoint_name": "Pts",
    "win_by_discard_label": "Hu",
    "win_by_draw_label": "Zimo",
    "win_by_discard_name": "Hu",
    "win_by_discard_name_2": "Double Hu",
    "win_by_discard_name_3": "Triple Hu",
    "win_by_draw_name": "Zimo",
    "exhaustive_draw_name": "Draw"
  },
  "play_restrictions": [
    [["flower"], []]
  ],
  "functions": {
    "calculate_points": [
      ["set_counter", "fu", "minipoints",
        ["remove_attrs"],
        // score calls
        ["convert_calls", {"pon": 2, "ankan": 16, "daiminkan": 8, "kakan": 8, "flower": 2}],
        ["remove_calls", "tanyaohai"],
        ["convert_calls", {"pon": 2, "ankan": 16, "daiminkan": 8, "kakan": 8, "flower": 2}],
        ["remove_calls"],
        // now remove the winning group
        ["remove_winning_groups",
          // kanchan
          {"group": [-1, 1], "value": 2},
          // penchan
          {"group": [-1, -2], "reject_if_exists": [[-3]], "value": 2},
          {"group": [1, 2], "reject_if_exists": [[3]], "value": 2},
          // ryanmen
          {"group": [-1, -2], "reject_if_missing": [[-3]]},
          {"group": [1, 2], "reject_if_missing": [[3]]},
          // shanpon
          {"group": [0, 0], "value": 2, "yaochuuhai_mult": 2, "tsumo_mult": 2},
          // tanki
          {"group": [0], "value": 2, "yakuhai_value": 2}
        ],
        // now remove all closed groups
        ["remove_groups", {"group": [0, 1, 2]}, {"group": [0, 0, 0], "value": 4, "yaochuuhai_mult": 2}],
        ["remove_groups", {"group": [0, 1, 2]}, {"group": [0, 0, 0], "value": 4, "yaochuuhai_mult": 2}],
        ["remove_groups", {"group": [0, 1, 2]}, {"group": [0, 0, 0], "value": 4, "yaochuuhai_mult": 2}],
        ["remove_groups", {"group": [0, 1, 2]}, {"group": [0, 0, 0], "value": 4, "yaochuuhai_mult": 2}],
        // remove final pair, if any
        ["remove_groups", {"group": [0, 0], "yakuhai_value": 2}],
        // only retain configurations with 0 tiles remaining
        ["retain_empty_hands"],
        // base 20
        ["add", 20, []],
        // tsumo +2
        ["add", 2, ["won_by_draw"]],
        // closed hand +10
        ["add", 10, [{"name": "has_no_call_named", "opts": ["chii", "pon", "daiminkan", "kakan"]}]]
      ]
    ]
  },
  "before_turn_change": {
    "actions": [
      ["unset_status", "flower", "kan", "double_kan"],
      ["when", [{"name": "status_missing", "opts": ["match_start"]}], [["unset_status", "first_turn"]]]
    ]
  },
  "after_turn_change": {
    "actions": [
      ["when", ["no_tiles_remaining"], [["pause", 1000], ["ryuukyoku"]]],
      ["when", [{"name": "status_missing", "opts": ["match_start"]}, "not_no_tiles_remaining"], [["draw"]]],
      ["when", [{"name": "everyone_status", "opts": ["no_flowers"]}], [["unset_status_all", "no_flowers", "match_start"], ["change_turn", "east"]]]
    ]
  },
  "after_call": {
    "actions": [
      ["when", [{"name": "match", "opts": [["last_call"], [[[["haku", "hatsu", "chun"], 1]]]]}, {"name": "match", "opts": [["calls"], [[[["haku"], 1], [["hatsu"], 1], [["chun"], 1]]]]}], [["as", "callee", [["make_responsible_for", "prev_seat", "all"]]]]],
      ["when", [{"name": "match", "opts": [["last_call"], [[[["ton", "nan", "shaa", "pei"], 1]]]]}, {"name": "match", "opts": [["calls"], [[[["ton"], 1], [["nan"], 1], [["shaa"], 1], [["pei"], 1]]]]}], [["as", "callee", [["make_responsible_for", "prev_seat", "all"]]]]]
    ]
  },
  "before_win": {
    "actions": [["set_counter", "dealer_repeats", "honba"], ["run", "calculate_points"]]
  },
  "after_start": {
    "actions": [["set_status_all", "first_turn", "match_start"]]
  },
  "buttons": {
    "start_flower": {
      "display_name": "Reveal flower",
      "show_when": [{"name": "status", "opts": ["match_start"]}, "our_turn", {"name": "match", "opts": [["hand", "draw"], [[ "nojoker", [["1f", "2f", "3f", "4f", "1g", "2g", "3g", "4g"], 1] ]]]}],
      "actions": [["big_text", "Flower"], ["flower", "1f", "2f", "3f", "4f", "1g", "2g", "3g", "4g"], ["draw", 1, "opposite_end"]],
      "unskippable": true
    },
    "start_no_flower": {
      "display_name": "No flowers",
      "show_when": [{"name": "status", "opts": ["match_start"]}, "our_turn", {"name": "not_match", "opts": [["hand", "draw"], [[ "nojoker", [["1f", "2f", "3f", "4f", "1g", "2g", "3g", "4g"], 1] ]]]}],
      "actions": [["big_text", "No flowers"], ["set_status", "no_flowers"], ["advance_turn"], ["recalculate_buttons"]],
      "unskippable": true
    },
    "chii": {
      "display_name": "Chow",
      "call": [[-2, -1], [-1, 1], [1, 2]],
      "show_when": [{"name": "status_missing", "opts": ["match_start"]}, "not_our_turn", "not_no_tiles_remaining", "kamicha_discarded", "call_available"],
      "actions": [["big_text", "Chow"], ["call"], ["change_turn", "self"]]
    },
    "pon": {
      "display_name": "Pung",
      "call": [[0, 0]],
      "show_when": [{"name": "status_missing", "opts": ["match_start"]}, "not_our_turn", "not_no_tiles_remaining", "someone_else_just_discarded", "call_available"],
      "actions": [["big_text", "Pung"], ["call"], ["change_turn", "self"]],
      "precedence_over": ["chii"]
    },
    "daiminkan": {
      "display_name": "Kong",
      "call": [[0, 0, 0]],
      "show_when": [{"name": "status_missing", "opts": ["match_start"]}, "not_our_turn", "not_no_tiles_remaining", "someone_else_just_discarded", "call_available"],
      "actions": [
        ["big_text", "Kong"], ["call"], ["change_turn", "self"],
        ["when", [{"name": "status", "opts": ["kan"]}], [["set_status", "double_kan"]]],
        ["set_status", "kan"],
        ["draw", 1, "opposite_end"]
      ],
      "precedence_over": ["chii", "pon"]
    },
    "ankan": {
      "display_name": "Self Kong",
      "call": [[0, 0, 0]],
      "show_when": [{"name": "status_missing", "opts": ["match_start"]}, "our_turn", "not_no_tiles_remaining", "has_draw", "self_call_available", {"name": "status_missing", "opts": ["just_reached"]}],
      "actions": [
        ["big_text", "Kong"], ["self_call"],
        ["when", [{"name": "status", "opts": ["kan"]}], [["set_status", "double_kan"]]],
        ["set_status", "kan"],
        ["draw", 1, "opposite_end"]
      ]
    },
    "kakan": {
      "display_name": "Kong",
      "call": [[0, 0, 0]],
      "upgrades": "pon",
      "show_when": [{"name": "status_missing", "opts": ["match_start"]}, "our_turn", "not_no_tiles_remaining", "has_draw", "can_upgrade_call", {"name": "status_missing", "opts": ["just_reached"]}],
      "actions": [
        ["big_text", "Kong"], ["upgrade_call"],
        ["when", [{"name": "status", "opts": ["kan"]}], [["set_status", "double_kan"]]],
        ["set_status", "kan"],
        ["draw", 1, "opposite_end"]
      ]
    },
    "ron": {
      "display_name": "Hu",
      "show_when": [
        "not_our_turn",
        {"name": "match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]},
        "someone_else_just_discarded",
        {"name": "match", "opts": [["hand", "calls", "last_discard"], ["win"]]}
      ],
      "actions": [["big_text", "Hu"], ["pause", 1000], ["reveal_hand"], ["win_by_discard"]],
      "precedence_over": ["chii", "pon", "daiminkan", "ron"]
    },
    "chankan": {
      "display_name": "Hu",
      "show_when": [
        "not_our_turn",
        {"name": "match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]},
        [
          [
            {"name": "last_call_is", "opts": ["kakan"]},
            {"name": "match", "opts": [["hand", "calls", "last_called_tile"], ["win"]]}
          ],
          [
            {"name": "last_call_is", "opts": ["ankan"]},
            {"name": "match", "opts": [["hand", "calls", "draw"], ["kokushi_tenpai"]]},
            {"name": "match", "opts": [["hand", "calls", "last_called_tile"], ["win"]]}
          ]
        ]
      ],
      "actions": [["big_text", "Hu"], ["pause", 1000], ["reveal_hand"], ["win_by_call"]],
      "precedence_over": ["chii", "pon", "daiminkan", "chankan"]
    },
    "tsumo": {
      "display_name": "Zimo",
      "show_when": [
        "our_turn",
        {"name": "status_missing", "opts": ["match_start"]},
        {"name": "match", "opts": [["hand", "calls", "draw"], ["tenpai", "kokushi_tenpai"]]},
        {"name": "match", "opts": [["hand", "calls", "draw"], ["win"]]}
      ],
      "actions": [["big_text", "Zimo"], ["pause", 1000], ["reveal_hand"], ["win_by_draw"]]
    },
    "flower": {
      "display_name": "Flower",
      "show_when": ["our_turn", "has_draw", {"name": "status_missing", "opts": ["match_start"]}, "not_just_discarded", {"name": "match", "opts": [["hand", "draw"], [[[["1f", "2f", "3f", "4f", "1g", "2g", "3g", "4g"], 1]]]]}],
      "actions": [
        ["big_text", "Flower"],
        ["flower", "1f", "2f", "3f", "4f", "1g", "2g", "3g", "4g"],
        ["set_status", "flower"],
        ["ite", ["no_tiles_remaining"], [["advance_turn"]], [["draw", 1, "opposite_end"]]]
      ],
      "unskippable": true
    }
  },
  "auto_buttons": {
    "1_auto_sort": {
      "display_name": "A",
      "desc": "Automatically sort your hand.",
      "actions": [["sort_hand"]],
      "enabled_at_start": true
    },
    "2_auto_ron": {
      "display_name": "R",
      "desc": "Automatically declare wins.",
      "actions": [
        ["when", [{"name": "buttons_include", "opts": ["ron"]}], [["press_button", "ron"]]],
        ["when", [{"name": "buttons_include", "opts": ["tsumo"]}], [["press_button", "tsumo"]]]
      ],
      "enabled_at_start": false
    },
    "3_auto_flower": {
      "display_name": "F",
      "desc": "Automatically declare all flowers.",
      "actions": [
        ["when", [{"name": "buttons_include", "opts": ["start_flower"]}], [["press_button", "start_flower"], ["press_first_call_button", "start_flower"]]],
        ["when", [{"name": "buttons_include", "opts": ["start_no_flower"]}], [["press_button", "start_no_flower"]]],
        ["when", [{"name": "buttons_include", "opts": ["flower"]}], [["press_button", "flower"], ["press_first_call_button", "flower"]]]
      ],
      "enabled_at_start": true
    },
    "4_auto_no_call": {
      "display_name": "C",
      "desc": "Skip all calls except wins.",
      "actions": [
        ["when", [
            "not_our_turn",
            {"name": "buttons_include", "opts": ["skip"]},
            {"name": "buttons_exclude", "opts": ["ron", "chankan"]}
          ], [["press_button", "skip"]]]
      ],
      "enabled_at_start": false
    },
    "5_auto_discard": {
      "display_name": "D",
      "desc": "Automatically discard your drawn tile.",
      "actions": [["when", ["our_turn", {"name": "buttons_exclude", "opts": ["tsumo", "ankan"]}, "has_draw"], [["discard_draw"]]]],
      "enabled_at_start": false
    }
  },
  "interruptible_actions": ["play_tile", "draw", "call", "self_call", "upgrade_call"],
  "initial_score": 0,
  "starting_tiles": 13,
  "max_rounds": 16
}
